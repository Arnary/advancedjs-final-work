{"version":3,"file":"commonHelpers2.js","sources":["../src/js/subscribe.js"],"sourcesContent":["import { axiosWrapper } from './utils/axiosWrapper.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst api = new axiosWrapper();\nconst BASE_URL = 'https://your-energy.b.goit.study/api/subscription';\n\nconst form = document.querySelector('.subscribe-form');\nconst emailInput = document.getElementById('email');\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const email = emailInput.value;\n\n    try {\n        const response = await sendSubscription(email);\n        showSuccessToast(response.message);\n        emailInput.value = '';\n    } catch (error) {\n        handleError(error);\n    }\n});\n\nasync function sendSubscription(email) {\n    const url = `${BASE_URL}`;\n    const data = { email: email };\n\n    try {\n        const response = await api.post(url, data);\n        return response;\n    } catch (error) {\n        throw error;\n    }\n}\n\nfunction showSuccessToast(message) {\n    iziToast.success({\n        message: message,\n        position: 'center',\n        timeout: 7000,\n        messageColor: \"black\"\n    });\n}\n\nfunction showInfoToast(message) {\n    iziToast.info({\n        message: message,\n        position: 'center',\n        timeout: 5000,\n        messageColor: \"black\"\n    });\n}\n\nfunction showErrorToast(message) {\n    iziToast.error({\n        message: message,\n        position: 'center',\n        timeout: 5000,\n        messageColor: \"black\"\n    });\n}\n\nfunction handleError(error) {\n    if (error.response) {\n        const { status, data } = error.response;\n        switch (status) {\n            case 400:\n                showErrorToast(data.message);\n                break;\n            case 404:\n                showNotFoundToast('Requested resource not found.');\n                break;\n            case 409:\n                showInfoToast('Subscription already exists.');\n                break;\n            case 500:\n                showErrorToast('Server error. Please try again later.');\n                break;\n            default:\n                showInfoToast(data.message);\n                break;\n        }\n    }\n}\n"],"names":["api","axiosWrapper","BASE_URL","form","emailInput","event","email","response","sendSubscription","showSuccessToast","error","handleError","url","data","message","iziToast","showInfoToast","showErrorToast","status"],"mappings":"gGAIA,MAAMA,EAAM,IAAIC,EACVC,EAAW,oDAEXC,EAAO,SAAS,cAAc,iBAAiB,EAC/CC,EAAa,SAAS,eAAe,OAAO,EAElDD,EAAK,iBAAiB,SAAU,MAAOE,GAAU,CAC7CA,EAAM,eAAc,EAEpB,MAAMC,EAAQF,EAAW,MAEzB,GAAI,CACA,MAAMG,EAAW,MAAMC,EAAiBF,CAAK,EAC7CG,EAAiBF,EAAS,OAAO,EACjCH,EAAW,MAAQ,EACtB,OAAQM,EAAO,CACZC,EAAYD,CAAK,CACpB,CACL,CAAC,EAED,eAAeF,EAAiBF,EAAO,CACnC,MAAMM,EAAM,GAAGV,CAAQ,GACjBW,EAAO,CAAE,MAAOP,GAEtB,GAAI,CAEA,OADiB,MAAMN,EAAI,KAAKY,EAAKC,CAAI,CAE5C,OAAQH,EAAO,CACZ,MAAMA,CACT,CACL,CAEA,SAASD,EAAiBK,EAAS,CAC/BC,EAAS,QAAQ,CACb,QAASD,EACT,SAAU,SACV,QAAS,IACT,aAAc,OACtB,CAAK,CACL,CAEA,SAASE,EAAcF,EAAS,CAC5BC,EAAS,KAAK,CACV,QAASD,EACT,SAAU,SACV,QAAS,IACT,aAAc,OACtB,CAAK,CACL,CAEA,SAASG,EAAeH,EAAS,CAC7BC,EAAS,MAAM,CACX,QAASD,EACT,SAAU,SACV,QAAS,IACT,aAAc,OACtB,CAAK,CACL,CAEA,SAASH,EAAYD,EAAO,CACxB,GAAIA,EAAM,SAAU,CAChB,KAAM,CAAE,OAAAQ,EAAQ,KAAAL,GAASH,EAAM,SAC/B,OAAQQ,EAAM,CACV,IAAK,KACDD,EAAeJ,EAAK,OAAO,EAC3B,MACJ,IAAK,KACD,kBAAkB,+BAA+B,EACjD,MACJ,IAAK,KACDG,EAAc,8BAA8B,EAC5C,MACJ,IAAK,KACDC,EAAe,uCAAuC,EACtD,MACJ,QACID,EAAcH,EAAK,OAAO,EAC1B,KACP,CACJ,CACL"}